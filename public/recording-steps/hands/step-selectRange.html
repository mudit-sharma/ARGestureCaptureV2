<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gesture Capture</title>
    <link rel="stylesheet" href="../../css/style.css ">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <meta charset="utf-8">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/control_utils/control_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js" crossorigin="anonymous"></script>
    <script src="../../js/userIdHandler.js"></script>    
    <script src="../../js/recordingHandler.js"></script>    
</head>
<body>
    <div class="topnav" id="myTopnav">
        <a href="../../index.html">Home</a>
        <a href="../../introduction.html">Introduction</a>
        <a href="../../instructions.html">Instructions</a>
        <a href="../../demo.html">Demo</a>
        <a href="../../gesturerecording.html" class="active">Gesture Recording</a>
        <a href="../../contacts.html">Contacts</a>
    </div>
    
    <div class="page-body">
        <h1>Select Points by Range</h1>
        <p>A range of points is highlighted across the red axis. Perform gestures (using one or both hands) suitable for selecting points by range. Click RECORD when ready.</p>

        <div style="display: inline-block;">
            <label style="display: none;">
                <input type="checkbox" id="toggleDrawHandsBox" onclick="toggleDrawSkeleton(this)" checked>
                Show body skeleton
            </label>
            <label style="display: none;">
                <input type="checkbox" id="toggleDrawDataBox" onclick="toggleDrawData(this)" checked>
                Show reference animation
            </label>
        </div>
        
        <div style="display:grid; grid-template-columns:700px 500px;">
            <div id="webgl_container">
                <div id="videoContent">
                    <video class="input_video" style="display: none;"></video>
                    <div style="position: relative; width: 640px; height: 500px; float: left;">
                        <canvas class="output_canvas" width="640px" height="500px" 
                            style="position: absolute; left: 0; top: 0; z-index: 0;"></canvas>
                    </div>
                </div>
                <div id="replayOverlay" width="640px" height="500px"></div>
                <div id="dataOverlay" class="data-selectRange" width="640px" height="500px" style="position:relative; top: -60px;"></div>
            </div>
            
            <div>
                <span>
                    Recording under participant ID:
                </span>
                <span id="cachedUserId">
                    Anonymous
                </span>
                <br>
                <span>
                    Recorded gestures:
                </span>                
                <span id="recorded-data-selectRange">                    
                </span>
                <br><br>
                <div>
                    <span id="recordingStatus">Press Record button to start a new recording.</span>
                    <span id="recordingTimer" style="font-size: 25pt; display: none;">5</span>
                </div>
                <br><br>
                <div>
                    <a id="recordButton" class="recordButton-inactive button-19" role="button" onclick="toggleRecording()">Record</a>
                    <a id="retryButton" class="recordButton-inactive button-20" style="display:none;" role="button" onclick="retryRecording()">Retry</a>
                    <a id="acceptButton" class="recordButton-inactive button-21" style="display:none;" role="button" onclick="acceptRecording()">Save</a>
                </div>           
                <a id="backButton" class="button-19" style="margin-top: 10px; align-self: end;" role="button" href="./step-selectCluster.html">Previous Step</a>
                <a id="nextButton" class="button-22" style="margin-top: 10px; align-self: end; pointer-events: none;" role="button" href="./step-zoom.html">Next Gesture</a>                         
            </div>
            
        </div>    
    </div>

    <script src="../../js/three.js"></script>
    <script src="../../js/THREE.MeshLine.js"></script>
    <script src="../../js/orbitControl.js"></script>
    <script src="../../js/gesture_replay.js" type="module"></script>
    <script src="../../js/mediapipe_controller.js" type="module"></script>
    <script src="../../js/dataVisualization.js"></script>
    
</body>
</html>